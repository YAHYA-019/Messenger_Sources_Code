package com.facebook.appperf.messagequeue.apps;

import X.0Ly;
import X.0Lz;
import X.0Wf;
import X.0Wu;
import X.0Wx;
import X.0X8;
import X.0XI;
import X.0nN;
import X.1Bi;
import X.1S1;
import X.2yD;
import X.AnonymousClass034;
import X.AnonymousClass046;
import X.C00i;
import X.C00y;
import X.C0Cy;
import X.C0Wy;
import X.C0hg;
import X.C0kz;
import X.C0un;
import X.C0vb;
import com.facebook.quicklog.LightweightQuickPerformanceLogger;
import java.util.List;
import java.util.ListIterator;
import java.util.Random;

/* loaded from: M4aMessageQueueDoctorInitializer.class */
public final class M4aMessageQueueDoctorInitializer extends AnonymousClass034 {
    public final C00i A01 = 1Bi.A00(16385);
    public final C00i A00 = new C00y(new 0nN(this, 0));

    public M4aMessageQueueDoctorInitializer() {
        AnonymousClass034.A00 = AnonymousClass034.A00;
    }

    public static AnonymousClass046 A00() {
        return new 1S1((LightweightQuickPerformanceLogger) 1Bi.A03(68406), new Random(), 1, 8000);
    }

    @Override // X.AnonymousClass034
    public 0Lz A02() {
        return new 0Ly();
    }

    @Override // X.AnonymousClass034
    public 0Wx A03() {
        return new 0Wx() { // from class: X.0vd
            public final 1CO A00 = (1CO) 1Bi.A03(16385);

            public int A00() {
                return (int) this.A00.Auy(36599688370000572L);
            }

            public long A01() {
                return this.A00.Auy(36599688368493241L);
            }

            public boolean A02() {
                return this.A00.AZk(36318213392642294L);
            }

            public boolean A03() {
                return this.A00.AZk(36318213392380147L);
            }

            public boolean A04() {
                return this.A00.AZk(36318213391724781L);
            }
        };
    }

    @Override // X.AnonymousClass034
    public C0Wy A04() {
        return new C0Wy() { // from class: X.0ve
            public final 1CO A00 = (1CO) 1Bi.A03(16385);

            @Override // X.C0Wy
            public long A00() {
                return this.A00.Auy(36599688367444661L);
            }

            @Override // X.C0Wy
            public long A01() {
                return this.A00.Auy(36599688367248052L);
            }

            @Override // X.C0Wy
            public long A02() {
                return this.A00.Auy(36599688367641271L);
            }

            @Override // X.C0Wy
            public boolean A05() {
                return this.A00.AZk(36318213390676194L);
            }

            @Override // X.C0Wy
            public boolean A07() {
                return this.A00.AZk(36318213391200487L);
            }

            @Override // X.C0Wy
            public boolean A08() {
                return this.A00.AZk(36318213393756421L);
            }

            @Override // X.C0Wy
            public boolean A09() {
                return this.A00.AZk(36318213393494273L);
            }

            @Override // X.C0Wy
            public boolean A0A() {
                return this.A00.AZk(36318213393428736L);
            }

            @Override // X.C0Wy
            public boolean A0B() {
                return this.A00.AZk(36318213391921390L);
            }

            @Override // X.C0Wy
            public boolean A0C() {
                return this.A00.AZk(36318213393821958L);
            }

            @Override // X.C0Wy
            public boolean A0D() {
                return this.A00.AZk(36318213393887495L);
            }

            @Override // X.C0Wy
            public boolean A0E() {
                return this.A00.AZk(36318213393232126L);
            }

            @Override // X.C0Wy
            public boolean A0F() {
                return this.A00.AZk(36318213392118000L);
            }

            @Override // X.C0Wy
            public boolean A0G() {
                return this.A00.AZk(36318213392314610L);
            }

            @Override // X.C0Wy
            public boolean A0H() {
                return this.A00.AZk(36318213393101053L);
            }

            @Override // X.C0Wy
            public boolean A0I() {
                return this.A00.AZk(36318213393559810L);
            }

            @Override // X.C0Wy
            public boolean A0J() {
                return this.A00.AZk(36318213393035516L);
            }

            @Override // X.C0Wy
            public boolean A0N() {
                return this.A00.AZk(36318213390282975L);
            }

            @Override // X.C0Wy
            public boolean A0O() {
                return this.A00.AZk(36318213392773368L);
            }
        };
    }

    @Override // X.AnonymousClass034
    public C0Wy A05() {
        return new C0Wy() { // from class: X.0va
            public final 1CO A00 = (1CO) 1Bi.A03(16385);

            @Override // X.C0Wy
            public long A00() {
                return this.A00.Auy(36599688368886458L);
            }

            @Override // X.C0Wy
            public long A01() {
                return this.A00.Auy(36599688367116979L);
            }

            @Override // X.C0Wy
            public long A02() {
                return this.A00.Auy(36599688366920370L);
            }

            @Override // X.C0Wy
            public boolean A04() {
                return this.A00.AZk(36318213392904442L);
            }

            @Override // X.C0Wy
            public boolean A0K() {
                return this.A00.AZk(36318213391397097L);
            }

            @Override // X.C0Wy
            public boolean A0L() {
                return this.A00.AZk(36318213392445684L);
            }

            @Override // X.C0Wy
            public boolean A0M() {
                return this.A00.AZk(36318213391003876L);
            }

            @Override // X.C0Wy
            public boolean A0N() {
                return this.A00.AZk(36318213392249073L);
            }

            @Override // X.C0Wy
            public boolean A0O() {
                return this.A00.AZk(36318213392969979L);
            }
        };
    }

    @Override // X.AnonymousClass034
    public 0X8 A06() {
        return new 0X8() { // from class: X.0vc
            public final 1CO A00 = (1CO) 1Bi.A03(16385);

            public boolean A00() {
                return this.A00.AZk(36318213393690884L);
            }

            public boolean A01() {
                return this.A00.AZk(36318213391134950L);
            }

            public boolean A02() {
                return this.A00.AZk(36318213393625347L);
            }

            public boolean A03() {
                return this.A00.AZk(36318213392838905L);
            }
        };
    }

    @Override // X.AnonymousClass034
    public C0hg A07() {
        C0kz A00 = C0kz.A00();
        if (A00 != null) {
            return A00.A00;
        }
        return null;
    }

    @Override // X.AnonymousClass034
    public C0Cy A08() {
        return (C0Cy) 1Bi.A03(66829);
    }

    @Override // X.AnonymousClass034
    public void A09(List list) {
        final C0vb c0vb = new C0vb();
        if (c0vb.A01()) {
            final AnonymousClass046 A00 = A00();
            list.add(new 0Wu(c0vb, A00) { // from class: X.0uj
                public final AnonymousClass046 A00;
                public final long A01;

                {
                    this.A01 = c0vb.A00();
                    this.A00 = A00;
                }

                /* JADX WARN: Multi-variable type inference failed */
                /* JADX WARN: Type inference failed for: r0v119, types: [java.lang.Throwable, X.0sE, java.lang.Exception] */
                public void BeB(C14f c14f) {
                    List list2;
                    List list3;
                    StackTraceElement[] stackTraceElementArr;
                    StackTraceElement stackTraceElement;
                    if (!c14f.A05(this.A01) || (list2 = c14f.A0A) == null || list2.size() == 0 || !0Wm.A02.A01.get() || (list3 = c14f.A0A) == null || list3.isEmpty()) {
                        return;
                    }
                    String A0u = 0Pz.A0u("Main thread stalled for ", " ms. (cpu time was ", " ms)", c14f.A01(), c14f.A00());
                    ListIterator listIterator = list3.listIterator();
                    String str = null;
                    int size = list3.size();
                    if (size > 1) {
                        str = C04I.A00().toString();
                    }
                    int i = 0;
                    long j = 0;
                    long j2 = 0;
                    while (listIterator.hasNext()) {
                        0Ww r0 = (0Ww) listIterator.next();
                        i++;
                        if (r0 != null && (stackTraceElementArr = r0.A07) != null && (stackTraceElementArr.length == 0 || (stackTraceElement = stackTraceElementArr[0]) == null || !stackTraceElement.isNativeMethod() || !"nativePollOnce".equals(stackTraceElement.getMethodName()))) {
                            StringBuilder A0n = AnonymousClass001.A0n(A0u);
                            A0n.append(" Record # ");
                            A0n.append(i);
                            A0n.append(" stalled for ");
                            A0n.append(r0.A02 - ((0Wp) c14f).A02);
                            A0n.append(" ms.");
                            0XC r02 = r0.A03;
                            AnonymousClass047 ACv = this.A00.ACv(true, "MainThreadStall", 817894971);
                            ACv.A8I("record_count", size);
                            ACv.A8I("record_index", i);
                            if (str != null) {
                                ACv.A8K("record_join_id", str);
                            }
                            ACv.A8J("duration", c14f.A01());
                            long j3 = ((0Wp) c14f).A06;
                            ACv.A8J("delay", j3 > 0 ? ((0Wp) c14f).A02 - j3 : -1);
                            ACv.A8J("cpu_time", c14f.A00());
                            if (r02 != null) {
                                long j4 = r02.A08;
                                if (j4 != -1) {
                                    ACv.A8J("total_memory", j4);
                                    ACv.A8J("max_memory", r02.A07);
                                    ACv.A8J("free_memory", r02.A03);
                                    if (i == 1) {
                                        j = r02.A03;
                                    }
                                    if (j > 0) {
                                        ACv.A8J("memory_usage_in_between", r02.A03 - j);
                                    }
                                }
                                if (r02.A05 > 0) {
                                    ACv.A8J("gc_time", r02.A06);
                                    ACv.A8J("gc_time_blocking", r02.A02);
                                    j2 += r02.A02;
                                    ACv.A8J("gc_time_blocking_total", j2);
                                }
                            }
                            ?? exc = new Exception(A0n.toString());
                            exc.mFillInStackTrace = false;
                            exc.setStackTrace(stackTraceElementArr);
                            ACv.Cmr(exc);
                            ACv.report();
                        }
                    }
                }

                public void BeF(C14f c14f) {
                }

                public String getName() {
                    return "StallReporter";
                }
            });
        }
    }

    @Override // X.AnonymousClass034
    public void A0A(List list) {
        1Bi.A03(42);
        if (0Wf.A00()) {
            0XI A00 = 0XI.A00();
            C0un c0un = A00.A00;
            if (c0un == null) {
                c0un = new C0un(A00.A01);
                A00.A00 = c0un;
            }
            list.add(c0un);
        }
    }

    public /* synthetic */ Boolean A0B() {
        boolean z = false;
        if (((2yD) this.A01.get()).AZk(36318213393953032L)) {
            z = true;
        }
        return Boolean.valueOf(z);
    }
}
